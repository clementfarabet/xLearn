# We include all Torch libraries
FILE(GLOB _all_library_files "${Torch_SOURCE_DIR}/libraries/*")
FOREACH(_library_file ${_all_library_files})
  IF(EXISTS "${_library_file}/CMakeLists.txt")
    INCLUDE_DIRECTORIES(${_library_file})
  ENDIF(EXISTS "${_library_file}/CMakeLists.txt")
ENDFOREACH(_library_file ${_all_library_files})

# We compile external packages iff explicitely asked by the user
FILE(GLOB _all_files *)
FOREACH(_file ${_all_files})
  IF(EXISTS "${_file}/CMakeLists.txt")
    GET_FILENAME_COMPONENT(__file ${_file} NAME_WE)
    OPTION(WITH_CONTRIB_${__file} "Build contrib package ${__file}")
    IF(WITH_CONTRIB_${__file})
      MESSAGE(STATUS "Including external package '${__file}'")
      ADD_SUBDIRECTORY(${_file})
    ENDIF(WITH_CONTRIB_${__file})
  ENDIF(EXISTS "${_file}/CMakeLists.txt")
ENDFOREACH(_file ${_all_files})
